Version 4
SHEET 1 3508 1168
WIRE 1120 -288 1104 -288
WIRE 1200 -288 1184 -288
WIRE 1296 -288 1280 -288
WIRE 32 -256 -176 -256
WIRE 672 -256 32 -256
WIRE 784 -256 672 -256
WIRE 944 -256 864 -256
WIRE -176 -240 -176 -256
WIRE 672 -224 672 -256
WIRE 160 -208 96 -208
WIRE 224 -208 160 -208
WIRE 336 -208 288 -208
WIRE 464 -208 336 -208
WIRE 560 -208 464 -208
WIRE 96 -192 96 -208
WIRE 560 -192 560 -208
WIRE 1184 -192 1120 -192
WIRE 1280 -192 1216 -192
WIRE 1184 -176 1184 -192
WIRE 1216 -176 1216 -192
WIRE -176 -144 -176 -160
WIRE 336 -144 336 -208
WIRE 1104 -144 1104 -288
WIRE 1104 -144 1008 -144
WIRE 1120 -144 1120 -192
WIRE 1120 -144 1104 -144
WIRE 1280 -144 1280 -192
WIRE 1296 -144 1296 -288
WIRE 1296 -144 1280 -144
WIRE 1344 -144 1296 -144
WIRE 1440 -144 1344 -144
WIRE 1536 -144 1440 -144
WIRE 944 -128 944 -256
WIRE 1008 -128 1008 -144
WIRE 1344 -128 1344 -144
WIRE 1440 -128 1440 -144
WIRE 1536 -128 1536 -144
WIRE 96 -112 96 -128
WIRE 560 -96 560 -112
WIRE 1120 -96 1120 -144
WIRE 1184 -96 1184 -112
WIRE 1184 -96 1120 -96
WIRE 1216 -96 1216 -112
WIRE 1280 -96 1280 -144
WIRE 1280 -96 1216 -96
WIRE 32 -80 32 -256
WIRE 160 -80 160 -208
WIRE 672 -80 672 -160
WIRE 464 -48 464 -208
WIRE 560 -48 464 -48
WIRE 1008 -32 1008 -48
WIRE 1344 -32 1344 -64
WIRE 1440 -32 1440 -64
WIRE 1536 -32 1536 -48
WIRE 560 -16 560 -48
WIRE -64 0 -176 0
WIRE 336 0 336 -80
WIRE 336 0 256 0
WIRE 672 32 672 -16
WIRE 944 32 944 -48
WIRE 944 32 672 32
WIRE 1152 32 944 32
WIRE 944 64 944 32
WIRE -176 96 -176 0
WIRE -64 96 -176 96
WIRE 288 96 256 96
WIRE 320 96 288 96
WIRE 432 96 400 96
WIRE 512 96 432 96
WIRE 560 96 560 64
WIRE 560 96 512 96
WIRE -176 112 -176 96
WIRE 560 112 560 96
WIRE 1152 176 1152 32
WIRE -176 192 -176 176
WIRE -64 192 -176 192
WIRE 288 192 256 192
WIRE 512 192 512 96
WIRE 512 192 368 192
WIRE -176 208 -176 192
WIRE 560 208 560 192
WIRE 1152 256 1152 240
WIRE 592 288 256 288
WIRE 928 288 928 272
WIRE 928 288 672 288
WIRE -160 384 -176 384
WIRE -64 384 -96 384
WIRE 960 384 960 272
WIRE 960 384 256 384
WIRE 1152 384 1152 336
WIRE 1152 384 960 384
WIRE 960 400 960 384
WIRE 160 480 160 464
WIRE -160 496 -176 496
WIRE 32 496 32 464
WIRE 32 496 -80 496
WIRE 960 496 960 480
FLAG 1008 -32 0
FLAG 1536 -32 0
FLAG -176 -256 IN
FLAG 1536 -144 OUT
FLAG 1344 -32 0
FLAG 560 -96 0
FLAG -176 -144 0
FLAG 96 -112 0
FLAG -176 208 0
FLAG -176 384 0
FLAG -176 496 0
FLAG 160 480 0
FLAG 560 208 0
FLAG 960 496 0
FLAG 1440 -32 0
FLAG 432 96 A
FLAG 288 96 B
SYMBOL voltage -176 -256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 220
SYMBOL ind2 928 -144 R0
WINDOW 0 -3 37 Right 2
WINDOW 3 -2 74 Right 2
SYMATTR InstName L1
SYMATTR Value 400µ
SYMATTR SpiceLine Rser=0.25
SYMATTR Type ind
SYMBOL ind2 1024 -32 R180
WINDOW 0 -4 72 Right 2
WINDOW 3 -3 34 Right 2
SYMATTR InstName L2
SYMATTR Value 6.25µ
SYMATTR SpiceLine Rser=0.003 Cpar=0.5p
SYMATTR Type ind
SYMBOL res 944 384 R0
SYMATTR InstName Rsense
SYMATTR Value 20m
SYMBOL res 1520 -144 R0
SYMATTR InstName Rload
SYMATTR Value 1.44
SYMBOL cap 320 -80 M180
WINDOW 123 24 6 Left 2
WINDOW 0 24 56 Left 2
WINDOW 3 47 32 Left 2
SYMATTR Value2 Rser=10K
SYMATTR InstName C3
SYMATTR Value 47p
SYMBOL res 544 -32 R0
SYMATTR InstName R5
SYMATTR Value 48k
SYMBOL res 544 96 R0
SYMATTR InstName R6
SYMATTR Value 5.3k
SYMBOL diode 656 -16 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value RFN1L7S
SYMBOL ind2 544 -96 M180
WINDOW 0 43 76 Left 2
WINDOW 3 41 42 Left 2
SYMATTR InstName L3
SYMATTR Value 6.25µ
SYMATTR SpiceLine Rser=0.3
SYMATTR Type ind
SYMBOL cap -192 112 R0
SYMATTR InstName C5
SYMATTR Value 4.7µ
SYMBOL cap 1328 -128 R0
WINDOW 123 24 36 Left 2
SYMATTR Value2 N=2
SYMATTR SpiceLine Rser=20m Lser=5n
SYMATTR InstName C8
SYMATTR Value 470µ
SYMBOL cap -96 400 M270
WINDOW 39 -21 32 VBottom 2
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR SpiceLine Rser=20k
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL res -64 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 60k
SYMBOL cap 80 -192 R0
SYMATTR InstName C1
SYMATTR Value 4.7µ
SYMBOL LT8316 96 192 R0
SYMATTR InstName U1
SYMBOL zener 656 -224 R0
WINDOW 123 47 32 Left 2
SYMATTR Value2 N=2
SYMATTR InstName D5
SYMATTR Value 1N5378B
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1136 176 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL cap 1184 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 470p
SYMBOL res 1136 240 R0
SYMATTR InstName R1
SYMATTR Value 500
SYMBOL res 1296 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 50
SYMBOL ind 768 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 4µ
SYMBOL schottky 288 -192 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value RB058L150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1424 -128 R0
SYMATTR InstName C7
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=5m Lser=1n
SYMBOL AutoGenerated\\IPA70R600P7S_L0 944 160 M90
SYMATTR InstName U2
SYMBOL res 688 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL AutoGenerated\\STPS20SM120STN 1200 -144 R270
SYMATTR InstName U3
SYMBOL voltage 416 96 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 10m {Freq})
SYMBOL res 384 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 108k
TEXT 976 -256 Bottom 2 !K1 L1 L2 L3 1
TEXT 976 -296 Bottom 2 ;8:1:1
TEXT 400 -440 Left 2 ;STABILITY ANALYSIS MODEL
TEXT 1456 224 Left 2 !.measure Aavg avg V(a)\n.measure Bavg avg V(b)\n.measure Are avg (V(a)-Aavg)*cos(360*time*Freq)\n.measure Aim avg -(V(a)-Aavg)*sin(360*time*Freq)\n.measure Bre avg (V(b)-Bavg)*cos(360*time*Freq)\n.measure Bim avg -(V(b)-Bavg)*sin(360*time*Freq)\n.measure GainMag param 20*log10(hypot(Are,Aim) / hypot(Bre,Bim))\n.measure GainPhi param mod(atan2(Aim, Are) - atan2(Bim, Bre)+180,360)-180
TEXT 1472 536 Left 2 !.param t0=7m\n.tran 0 {t0+25/freq} {t0}
TEXT 1456 680 Left 2 !.step oct param freq 10k 80k 10\n.save V(a) V(b)\n.option plotwinsize=0 numdgt=15
